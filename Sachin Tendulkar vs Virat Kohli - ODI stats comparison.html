<!DOCTYPE html>
<html>
   <head>
      <script type = "text/javascript" src = "https://d3js.org/d3.v5.min.js"></script>
	  <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
      <style> 
         .line {
            	fill: none;
            	stroke-width: 2px;
			}		
		 .navigation {
				height:40px;
				padding: 8px 8px;
				color: #a972cb;				
				text-align: center;
				text-decoration: none;
				display: inline-block;
				font-size: 24px;
				margin: 4px 4px;
				transition-duration: 0.4s;
				cursor: pointer;
			}		
		
		 :root {
			--line-chart-color: #607D8B;
			--annotation-context-color: #00796B;
			--annotation-above-color: #00BFA5;
			--annotation-anomaly-color: #E8336D;
			
			}
				
		.annotation path {
				stroke: var(--annotation-context-color);
			}

		.annotation:not(.above):not(.anomaly) path {
				stroke-dasharray: 1,3;
			}

		.annotation text {
				fill: var(--annotation-context-color);
			}

		.annotation.above path {
			stroke: var(--annotation-above-color);
			}

		.annotation.above text {
			fill: var(--annotation-above-color);
			}

		.annotation.anomaly path {
			stroke: var(--annotation-anomaly-color);
			stroke-width: 2px;
			}

		.annotation.anomaly text {
			fill: var(--annotation-anomaly-color);
			}

		.annotation-note-bg {
			fill: rgba(0, 0, 0, 0);
			}
			
			
		#container {width:1400px; height:600px; }
		#container #inner_container {width:1000px; height:550px; }
		#inner_container  svg path {fill:none;}

		
		}

      </style>
      <h1> Sachin Tendulkar or Virat Kohli: Who will become the highest ODI run getter by the time Virat retires? </h1>
	
   </head>
   <p>Master Blaster Sachin Tendulkar remains the greatest ODI batter of all time in international cricket. Known as the 'God of Cricket', Tendulkar has plenty of monumental records to his name. Even matching them seems far-fetched. Among active cricketers, former Indian captain Virat Kohli is deemed the successor of Tendulkar. Here, we compare the ODI runs statistics of Kohli and Tendulkar (after 262 matches).</p>
   

   <body onload='sachin_statistics()'>
   <div id="container">
		<button id="sachin" class="navigation" width = "40px" background-color="#008CBA" onclick="sachin_statistics()">1</button>
		<button id="virat" class="navigation" width = "40px" background-color="#f44336" onclick="virat_statistics()">2</button>
		<button id= "compare" class="navigation" width = "40px" background-color="#4CAF50" onclick="sachin_vs_virat()">3</button>	
		<div id="inner_container">	
			    <svg id="player_stats" width="1400" height="500"></svg>		
				<button id= "sachin_barview" class="navigation" background-color="#4CAF50" width = "200px" 
						onclick="sachin_statistics2()">Switch to bar chart view</button>
				<button id= "sachin_lineview" class="navigation" background-color="#008CBA" width = "200px" 
						onclick="sachin_statistics()">Switch back to line chart view</button>
				<button id= "virat_barview" class="navigation" background-color="#4CAF50" width = "200px" 
						onclick="virat_statistics2()">Switch to bar chart view</button>
				<button id= "virat_lineview" class="navigation" background-color="#008CBA" width = "200px" 
						onclick="virat_statistics()">Switch back to line chart view</button>	
				<button id= "virat_projected" class="navigation" background-color="#008CBA" width = "200px" 
						onclick="virat_projected()">View future projections for Virat</button>
				<p id="projections"></p>
		</div>

	</div>
    <script>
	
	var svg_left = 1000,
		svg_right = d3.select("#player_stats").attr("width") - svg_left,
		margin = 80,
        width = svg_left - 2*margin,
        width_controls = svg_right - 2*margin,		
        height = d3.select("#player_stats").attr("height") - 2*margin,
    	tick_values_matches = [0, 50, 100, 150, 200, 250, 300, 350, 400, 450],
    	tick_values_cumulativeruns = [0, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000, 11000, 12000, 13000, 14000, 15000, 16000, 17000, 18000],
		tick_values_cumulativeruns_proj = [0, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000, 11000, 12000, 13000, 14000, 15000, 16000, 17000, 18000, 19000, 20000, 21000, 22000, 23000],
		tick_values_runs = [0, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200],
		proj_stmt = "Currently, Virat Kohli is experiencing a slump in form. His ODI batting average has fallen from above 60 to 57.68, but everyone knows his class and is waiting for his remarkable comeback. For the projections in this visualization, Virat's last 50 ODI innings average along with his career ODI average have been used.";
			
		
	async function sachin_statistics() {	
	
		var sachin_button = document.getElementById("sachin");
		var virat_button = document.getElementById("virat");
		var compare_button = document.getElementById("compare");
		var sachin_bar_button = document.getElementById("sachin_barview");
		var sachin_line_button = document.getElementById("sachin_lineview");	
		var virat_bar_button = document.getElementById("virat_barview");
		var virat_line_button = document.getElementById("virat_lineview");
		var virat_projected_button = document.getElementById("virat_projected");	
		var virat_projections = document.getElementById("projections");		

		sachin_button.disabled = true;
		virat_button.disabled = false;
		virat_button.autofocus;
		compare_button.disabled = true;
		sachin_bar_button.disabled = false;
		sachin_bar_button.style.display = '';			
		sachin_line_button.style.display = 'none';
		virat_bar_button.style.display = 'none';
		virat_line_button.style.display = 'none';
		virat_projected_button.style.display = 'none';	
		virat_projections.style.display = 'none';		
		
		d3.selectAll('.axes').remove();			
		d3.selectAll('.bar').remove();
		d3.selectAll('.barlegend').remove();		
		d3.selectAll('.line').remove();
		d3.selectAll('.title').remove();		
		d3.selectAll('.linelegend12').remove();		
		d3.selectAll('.val').remove();
		d3.selectAll('.circle').remove();	
		d3.selectAll('.annotations').remove();
		d3.selectAll('.svgrect').remove();	
		d3.selectAll('.projections').remove();
		
        const data = await d3.csv("https://raw.githubusercontent.com/arnabsaha16/sachinvskohli/main/Sachin_ODI.csv");
		 
		data.forEach(function(d) {
               d.MatchNumber = +d.MatchNumber;
               d.Runs = +d.Runs;
               d.CumulativeRuns = +d.CumulativeRuns;
               d.BattingAverage = +d.BattingAverage;

            });

        var xScale = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d.MatchNumber; })]).range([0, width]);
        var yScale_cumulativeruns = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d.CumulativeRuns; })]).range([height, 0]);
		var yScale_runs = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d.Runs; })]).range([height, 0]);
		
		// Retain key values for use on later scenes
		var xScale_max = d3.max(data, function(d) { return d.MatchNumber; });
		var yScale_cumulativeruns_max = d3.max(data, function(d) { return d.CumulativeRuns; });
		var yScale_runs_max = d3.max(data, function(d) { return d.Runs; });
		localStorage.setItem("Key_xScale_max", xScale_max);
		localStorage.setItem("Key_yScale_cumulativeruns_max", yScale_cumulativeruns_max);
		localStorage.setItem("Key_yScale_runs_max", yScale_runs_max);
  

        var svg = d3.select("#player_stats")
					.append("svg")
					.attr("width", width + 2*margin)
					.attr("height", height + 2*margin)
					.append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")");
		var linecolor = "blue";
	
		draw_x_axis(svg, data, xScale);
		//draw_yScale_runs_axis(svg, data, yScale_runs);
		draw_yScale_cumulativeruns_axis(svg, data, yScale_cumulativeruns);
	
		draw_linechart(svg, data, xScale, yScale_cumulativeruns, linecolor);
		
		var title_sachin_statistics = "Sachin Tendulkar: A legend's journey to the top";
		add_chart_title(svg, title_sachin_statistics);	
			
		draw_annotations_sachin(svg, data, xScale, yScale_cumulativeruns);
		
		
		}
		
	async function sachin_statistics2() {
	
		var sachin_button = document.getElementById("sachin");
		var virat_button = document.getElementById("virat");
		var compare_button = document.getElementById("compare");
		var sachin_bar_button = document.getElementById("sachin_barview");
		var sachin_line_button = document.getElementById("sachin_lineview");	
		var virat_bar_button = document.getElementById("virat_barview");
		var virat_line_button = document.getElementById("virat_lineview");	
		var virat_projected_button = document.getElementById("virat_projected");
		var virat_projections = document.getElementById("projections");
		
		sachin_button.disabled = true;
		virat_button.disabled = false;
		virat_button.autofocus;
		compare_button.disabled = true;
		sachin_line_button.disabled = false;
		sachin_line_button.style.display = '';		
		sachin_bar_button.style.display = 'none';
		virat_bar_button.style.display = 'none';
		virat_line_button.style.display = 'none';
		virat_projected_button.style.display = 'none';	
		virat_projections.style.display = 'none';
		
		d3.selectAll('.axes').remove();	
		d3.selectAll('.bar').remove();
		d3.selectAll('.barlegend').remove();		
		d3.selectAll('.line').remove();
		d3.selectAll('.title').remove();		
		d3.selectAll('.linelegend12').remove();		
		d3.selectAll('.val').remove();
		d3.selectAll('.circle').remove();	
		d3.selectAll('.annotations').remove();
		d3.selectAll('.svgrect').remove();	
		d3.selectAll('.projections').remove();		
		
        const data = await d3.csv("https://raw.githubusercontent.com/arnabsaha16/sachinvskohli/main/Sachin_ODI.csv");
		 
		data.forEach(function(d) {
               d.MatchNumber = +d.MatchNumber;
               d.Runs = +d.Runs;
               d.CumulativeRuns = +d.CumulativeRuns;
               d.BattingAverage = +d.BattingAverage;

            });

        var xScale = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d.MatchNumber; })]).range([0, width]);
        var yScale_cumulativeruns = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d.CumulativeRuns; })]).range([height, 0]);
		var yScale_runs = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d.Runs; })]).range([height, 0]);
		
		// Retain key values for use on later scenes
		var xScale_max = d3.max(data, function(d) { return d.MatchNumber; });
		var yScale_cumulativeruns_max = d3.max(data, function(d) { return d.CumulativeRuns; });
		var yScale_runs_max = d3.max(data, function(d) { return d.Runs; });
		localStorage.setItem("Key_xScale_max", xScale_max);
		localStorage.setItem("Key_yScale_cumulativeruns_max", yScale_cumulativeruns_max);
		localStorage.setItem("Key_yScale_runs_max", yScale_runs_max);
  

        var svg = d3.select("#player_stats")
					.append("svg")
					.attr("width", width + 2*margin)
					.attr("height", height + 2*margin)
					.append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")");
	
		draw_x_axis(svg, data, xScale);
		draw_yScale_runs_axis(svg, data, yScale_runs);
		//draw_yScale_cumulativeruns_axis(svg, data, yScale_cumulativeruns);
		
		draw_barchart(svg, data, xScale, yScale_runs);	
		
		var title_sachin_statistics = "Sachin Tendulkar: A match wise visual of his heroics";
		add_chart_title(svg, title_sachin_statistics);	
			

	}		
		
	async function virat_statistics() {	
	
		var sachin_button = document.getElementById("sachin");
		var virat_button = document.getElementById("virat");
		var compare_button = document.getElementById("compare");
		var sachin_bar_button = document.getElementById("sachin_barview");
		var sachin_line_button = document.getElementById("sachin_lineview");	
		var virat_bar_button = document.getElementById("virat_barview");
		var virat_line_button = document.getElementById("virat_lineview");	
		var virat_projected_button = document.getElementById("virat_projected");
		var virat_projections = document.getElementById("projections");
		
		sachin_button.disabled = false;
		virat_button.disabled = true;
		compare_button.disabled = false;
		compare_button.autofocus;		
		virat_bar_button.disabled = false;
		virat_bar_button.style.display = '';		
		sachin_bar_button.style.display = 'none';
		sachin_line_button.style.display = 'none';
		virat_line_button.style.display = 'none';
		virat_projected_button.style.display = 'none';	
		virat_projections.style.display = 'none';
	
		d3.selectAll('.axes').remove();		
		d3.selectAll('.bar').remove();
		d3.selectAll('.barlegend').remove();		
		d3.selectAll('.line').remove();
		d3.selectAll('.title').remove();		
		d3.selectAll('.linelegend12').remove();		
		d3.selectAll('.val').remove();
		d3.selectAll('.circle').remove();	
		d3.selectAll('.annotations').remove();
		d3.selectAll('.svgrect').remove();	
		d3.selectAll('.projections').remove();		
		
        const data = await d3.csv("https://raw.githubusercontent.com/arnabsaha16/sachinvskohli/main/Virat_ODI.csv");
		 
		data.forEach(function(d) {
               d.MatchNumber = +d.MatchNumber;
               d.Runs = +d.Runs;
               d.CumulativeRuns = +d.CumulativeRuns;
               d.BattingAverage = +d.BattingAverage;

            });

		// Using max values stored in Local Storage to recreate xScale, yScale_cumulativeruns and yScale_runs with the same maximum values
		var xScale_max = localStorage.getItem("Key_xScale_max");
		var yScale_cumulativeruns_max = localStorage.getItem("Key_yScale_cumulativeruns_max");
		var yScale_runs_max = localStorage.getItem("Key_yScale_runs_max");	

	
		var xScale = d3.scaleLinear().domain([0, xScale_max]).range([0, width]);
        var yScale_cumulativeruns = d3.scaleLinear().domain([0, yScale_cumulativeruns_max]).range([height, 0]);
		var yScale_runs = d3.scaleLinear().domain([0, yScale_runs_max]).range([height, 0]);
		
        var svg = d3.select("#player_stats")
					.append("svg")
					.attr("width", width + 2*margin)
					.attr("height", height + 2*margin)
					.append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")");
		var linecolor = "red";					
	
		draw_x_axis(svg, data, xScale);
		//draw_yScale_runs_axis(svg, data, yScale_runs);
		draw_yScale_cumulativeruns_axis(svg, data, yScale_cumulativeruns);
	
		draw_linechart(svg, data, xScale, yScale_cumulativeruns, linecolor);	
		
		var title_virat_statistics = "Virat Kohli: The best in the modern day game?";
		add_chart_title(svg, title_virat_statistics);	

		draw_annotations_virat(svg, data, xScale, yScale_cumulativeruns);
		
		}
		
	async function virat_statistics2() {	
	
		var sachin_button = document.getElementById("sachin");
		var virat_button = document.getElementById("virat");
		var compare_button = document.getElementById("compare");
		var sachin_bar_button = document.getElementById("sachin_barview");
		var sachin_line_button = document.getElementById("sachin_lineview");	
		var virat_bar_button = document.getElementById("virat_barview");
		var virat_line_button = document.getElementById("virat_lineview");	
		var virat_projected_button = document.getElementById("virat_projected");
		var virat_projections = document.getElementById("projections");
		
		sachin_button.disabled = false;
		virat_button.disabled = true;
		compare_button.disabled = false;
		compare_button.autofocus;		
		virat_line_button.disabled = false;
		virat_line_button.style.display = '';		
		sachin_bar_button.style.display = 'none';
		sachin_line_button.style.display = 'none';
		virat_bar_button.style.display = 'none';
		virat_projected_button.style.display = 'none';
		virat_projections.style.display = 'none';		
	
		d3.selectAll('.axes').remove();			
		d3.selectAll('.bar').remove();
		d3.selectAll('.barlegend').remove();		
		d3.selectAll('.line').remove();
		d3.selectAll('.title').remove();		
		d3.selectAll('.linelegend12').remove();		
		d3.selectAll('.val').remove();
		d3.selectAll('.circle').remove();	
		d3.selectAll('.annotations').remove();
		d3.selectAll('.svgrect').remove();	
		d3.selectAll('.projections').remove();
		
        const data = await d3.csv("https://raw.githubusercontent.com/arnabsaha16/sachinvskohli/main/Virat_ODI.csv");
		 
		data.forEach(function(d) {
               d.MatchNumber = +d.MatchNumber;
               d.Runs = +d.Runs;
               d.CumulativeRuns = +d.CumulativeRuns;
               d.BattingAverage = +d.BattingAverage;

            });

		// Using max values stored in Local Storage to recreate xScale, yScale_cumulativeruns and yScale_runs with the same maximum values
		var xScale_max = localStorage.getItem("Key_xScale_max");
		var yScale_cumulativeruns_max = localStorage.getItem("Key_yScale_cumulativeruns_max");
		var yScale_runs_max = localStorage.getItem("Key_yScale_runs_max");	

		//console.log(xScale_max);
		//console.log(yScale_cumulativeruns_max);
		//console.log(yScale_runs_max);		
		
		var xScale = d3.scaleLinear().domain([0, xScale_max]).range([0, width]);
        var yScale_cumulativeruns = d3.scaleLinear().domain([0, yScale_cumulativeruns_max]).range([height, 0]);
		var yScale_runs = d3.scaleLinear().domain([0, yScale_runs_max]).range([height, 0]);
		
        var svg = d3.select("#player_stats")
					.append("svg")
					.attr("width", width + 2*margin)
					.attr("height", height + 2*margin)
					.append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")");				
	
		draw_x_axis(svg, data, xScale);
		draw_yScale_runs_axis(svg, data, yScale_runs);
		//draw_yScale_cumulativeruns_axis(svg, data, yScale_cumulativeruns);	
		
		var title_virat_statistics = "Virat Kohli: The journey so far looks promising";
		add_chart_title(svg, title_virat_statistics);	

		draw_barchart(svg, data, xScale, yScale_runs);
		
		}		

	async function sachin_vs_virat() {	
	
		var sachin_button = document.getElementById("sachin");
		var virat_button = document.getElementById("virat");
		var compare_button = document.getElementById("compare");
		var sachin_bar_button = document.getElementById("sachin_barview");
		var sachin_line_button = document.getElementById("sachin_lineview");	
		var virat_bar_button = document.getElementById("virat_barview");
		var virat_line_button = document.getElementById("virat_lineview");
		var virat_projected_button = document.getElementById("virat_projected");
		var virat_projections = document.getElementById("projections");
		
		sachin_button.disabled = true;
		virat_button.disabled = false;
		compare_button.disabled = true;
		virat_button.autofocus;		
		sachin_line_button.style.display = 'none';
		sachin_bar_button.style.display = 'none';
		virat_line_button.style.display = 'none';		
		virat_bar_button.style.display = 'none';
		virat_projected_button.style.display = '';
		virat_projections.style.display = 'none';

		d3.selectAll('.axes').remove();			
		d3.selectAll('.bar').remove();
		d3.selectAll('.barlegend').remove();		
		d3.selectAll('.line').remove();
		d3.selectAll('.title').remove();		
		d3.selectAll('.linelegend12').remove();		
		d3.selectAll('.val').remove();
		d3.selectAll('.circle').remove();	
		d3.selectAll('.annotations').remove();
		d3.selectAll('.svgrect').remove();
		d3.selectAll('.projections').remove();		
		
		const data_sachin = await d3.csv("https://raw.githubusercontent.com/arnabsaha16/sachinvskohli/main/Sachin_ODI.csv");
		const data_virat = await d3.csv("https://raw.githubusercontent.com/arnabsaha16/sachinvskohli/main/Virat_ODI.csv");
 
		data_sachin.forEach(function(d) {
               d.MatchNumber = +d.MatchNumber;
               d.Runs = +d.Runs;
               d.CumulativeRuns = +d.CumulativeRuns;
               d.BattingAverage = +d.BattingAverage;

            });
			
		data_virat.forEach(function(d) {
               d.MatchNumber = +d.MatchNumber;
               d.Runs = +d.Runs;
               d.CumulativeRuns = +d.CumulativeRuns;
               d.BattingAverage = +d.BattingAverage;

            });

		// Using max values stored in Local Storage to recreate xScale, yScale_cumulativeruns and yScale_runs with the same maximum values
		var xScale_max = localStorage.getItem("Key_xScale_max");
		var yScale_cumulativeruns_max = localStorage.getItem("Key_yScale_cumulativeruns_max");
		var yScale_runs_max = localStorage.getItem("Key_yScale_runs_max");	

		//console.log(xScale_max);
		//console.log(yScale_cumulativeruns_max);
		//console.log(yScale_runs_max);		
		
		var xScale = d3.scaleLinear().domain([0, xScale_max]).range([0, width]);
        var yScale_cumulativeruns = d3.scaleLinear().domain([0, yScale_cumulativeruns_max]).range([height, 0]);
		var yScale_runs = d3.scaleLinear().domain([0, yScale_runs_max]).range([height, 0]);
		
        var svg_sachin = d3.select("#player_stats")
					.append("svg")
					.attr("width", width + 2*margin)
					.attr("height", height + 2*margin)
					.append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")");
		var linecolor_sachin = "blue";
	
		draw_x_axis(svg_sachin, data_sachin, xScale);
		draw_yScale_cumulativeruns_axis(svg_sachin, data_sachin, yScale_cumulativeruns);
		draw_linechart(svg_sachin, data_sachin, xScale, yScale_cumulativeruns, linecolor_sachin);	

        var svg_virat = d3.select("#player_stats")
					.append("svg")
					.attr("width", width + 2*margin)
					.attr("height", height + 2*margin)
					.append("g")
                    .attr("transform", "translate(" + margin + "," + margin + ")");	
		var linecolor_virat = "red";					
	
		draw_linechart(svg_virat, data_virat, xScale, yScale_cumulativeruns, linecolor_virat);	
		
			//Initialize line chart legend
			var linecolorData = [
			{name: "Sachin Tendulkar", color: "blue", barwidth: "2"},
			{name: "Virat Kohli", color: "red", barwidth: "2"},

			];
  
			//Create line chart legend items
			 svg_sachin.append("g")
				.selectAll(".line")
				.data(linecolorData)
				.enter()
				.append("rect")
				.attr("class", "linelegend12")
				.attr("width", 30)
				.attr("height", d => d.barwidth)
				.style("fill", d => d.color)
				.attr("x", 690)
				.attr("y", function(d, i) { return 371 + i * 20; });
				
			//Create line chart legend labels
			 svg_sachin.append("g")
				.selectAll(".line")
				.data(linecolorData)
				.enter()
				.append("text")
				.attr("class", "linelegend12")				
				.attr("x", 725)
				.attr("y", function(d, i) { return 375 + i * 20; })
				.style("font-size", "14px")
				.text(function(d) {
					if (d.color == "blue") { return "Sachin Tendulkar"; }  
					else return "Virat Kohli";  });

			var title_sachin_vs_virat = "Who is better? A really tough decision...";
			add_chart_title(svg_sachin, title_sachin_vs_virat);
		
		}
		
		
	 async function virat_projected() {

		var projections = document.getElementById("projections");
		var virat_projected_button = document.getElementById("virat_projected");
		virat_projected_button.style.display = 'none';
		
		projections.style.display = '';
		projections.innerHTML = proj_stmt;
		projections.style.marginLeft = margin;
		projections.style.marginTop = height + 10;
		projections.style.fontSize = "14px";
		
		d3.selectAll('.axes').remove();			
		d3.selectAll('.title').remove();
		d3.selectAll('.line').remove();		
			
		const data_virat_projections = await d3.csv("https://raw.githubusercontent.com/arnabsaha16/sachinvskohli/main/Virat_future_projections.csv");
 
		data_virat_projections.forEach(function(d) {
               d.MatchNumber = +d.MatchNumber;
               d.CumulativeRuns = +d.CumulativeRuns;

            });
			
		const data_sachin = await d3.csv("https://raw.githubusercontent.com/arnabsaha16/sachinvskohli/main/Sachin_ODI.csv");
		 
		data_sachin.forEach(function(d) {
               d.MatchNumber = +d.MatchNumber;
               d.Runs = +d.Runs;
               d.CumulativeRuns = +d.CumulativeRuns;
               d.BattingAverage = +d.BattingAverage;

            });
			
		// Using max values stored in Local Storage to recreate xScale, yScale_cumulativeruns and yScale_runs with the same maximum values
		var xScale_max = localStorage.getItem("Key_xScale_max");
		var xScale = d3.scaleLinear().domain([0, xScale_max]).range([0, width]);
		var yScale_cumulativeruns_proj = d3.scaleLinear().domain([0, d3.max(data_virat_projections, function(d) { return d.CumulativeRuns; })]).range([height, 0]);
	
		
		var svg_proj = d3.select("#player_stats")
						.append("svg")
						.attr("width", width + 2*margin)
						.attr("height", height + 2*margin)
						.append("g")
						.attr("transform", "translate(" + margin + "," + margin + ")");
								
		draw_x_axis(svg_proj, data_virat_projections, xScale);
		draw_yScale_cumulativeruns_axis_proj(svg_proj, data_virat_projections, yScale_cumulativeruns_proj);
			
		var linecolor_sachin = "blue";					
	
		draw_linechart(svg_proj, data_sachin, xScale, yScale_cumulativeruns_proj, linecolor_sachin);
		
		var linecolor_virat = "red";					
	
		draw_linechart(svg_proj, data_virat_projections, xScale, yScale_cumulativeruns_proj, linecolor_virat);
		
		var title_statistics = "What does the projection say?";
		add_chart_title(svg_proj, title_statistics);
		
		draw_annotations_projections(svg_proj, data_virat_projections, xScale, yScale_cumulativeruns_proj);
				
		
		}		
		

	 // Add title to the dual chart and dynamically change text based on scenes
	 function add_chart_title(svg, title_text) {
		svg.append('text')
			.attr('class', 'title')
			.attr('x', width / 2)
			.attr('y', -30)
			.style("font-size", "28px")
			.style("font-weight", "bold")
			.attr('text-anchor', 'middle')
			.text(title_text);
			
		}
		
	 // Draw annotations with data points representing key highlights of Sachin's career
	 function draw_annotations_sachin(svg, data, xScale, yScale_cumulativeruns) {
		
		//special match # set used: [1, 78, 187, 313, 363, 441, 452, 462]
		
		svg.selectAll("circle")
			.data(data)
			.enter()
			.append("circle")
			.attr("class","annotations")
			.filter(function(d) { 
				return (d.MatchNumber == 1 || 
						d.MatchNumber == 78 ||
						d.MatchNumber == 187 ||
						d.MatchNumber == 313 ||
						d.MatchNumber == 363 || 
						d.MatchNumber == 441 ||
						d.MatchNumber == 452 ||
						d.MatchNumber == 462); })
			.transition()
            .duration(300)
            .delay(function (d, i) {
             return i * 400;   	})			
			.attr("cx", function(d) { return xScale(d.MatchNumber); })
			.attr("cy", function(d) { return yScale_cumulativeruns(d.CumulativeRuns); })
			.attr("r", 5)
			.style("fill", "yellow");
			
		const annotations_sachin = [
		{
			note: {	label: "Became the 2nd youngest cricketer to make an ODI debut at an age of 16 Years 238 Days"},
			connector: {
				end: "dot",        
				type: "line", 
				endScale: 10  
			},
			y: yScale_cumulativeruns(1) + margin,
            x: margin + xScale(1),
			dy: 0-3*margin,
			dx: margin/2
        },
		{
			note: { label: "Scored his first ODI century after 79 matches and 76 innings" },
			connector: {
				end: "dot",        
				type: "line",      
				endScale: 10     
			},
			x: margin + xScale(78),
			y: yScale_cumulativeruns(78) + margin/2,
			dy: 0 - 1.5*margin,
			dx: margin/2
		},{
			note: { label: "Scored back-to-back centuries against top rivals Australia to help India win Coca-Cola cup" },
			connector: {
				end: "dot",        
				type: "line",      
				endScale: 10
			},
            x: margin + xScale(187),
			y: yScale_cumulativeruns(187) - margin/2,
			dy: 0-margin,
			dx: margin/4
		},{
			note: {	label: "Even though India lost the World Cup final, secured prestigious Man of the Tournament award" },
			connector: {
				end: "dot",
				type: "line",
				endScale: 10
			},
            x: margin + xScale(313),
			y: yScale_cumulativeruns(313) - 1.75*margin,
			dy: margin,
			dx: 0-margin/4
		},{
			note: {	label: "Made a comeback from tennis elbow injury to score a century against West Indies" },
			connector: {
				end: "dot",
				type: "line",
				endScale: 10
			},			
            x: margin + xScale(363),
			y: yScale_cumulativeruns(363) - 2.2*margin,
			dy: 0-margin/2,
			dx: 0-margin/4
		},{
			note: {	label: "Became the first ODI player to register a double century" },
			connector: {
				end: "dot",
				type: "line",
				endScale: 10
			},			
            x: margin + xScale(441),
			y: yScale_cumulativeruns(441) - 2.95*margin,
			dy: 1.5*margin,
			dx: 0-margin
		},{
			note: {	label: "Became a World Cup winner in his sixth World Cup" },
			connector: {
				end: "dot",
				type: "line",
				endScale: 10
			},			
            x: margin + xScale(452),
			y: yScale_cumulativeruns(452) - 3.07*margin,
			dy: 2.5*margin,
			dx: 0-1.25*margin
		},{
			note: {	label: "Legend retires with maximum number of runs and centuries in this format" },
			connector: {
				end: "dot",
				type: "line",
				endScale: 10
			},			
            x: margin + xScale(462),
			y: yScale_cumulativeruns(462) - 3.15*margin,
			dy: 3.5*margin,
			dx: 0-1.5*margin
		}];
		
		const makeAnnotations_sachin = d3.annotation().annotations(annotations_sachin);
		 d3.select("#player_stats")
			.append("svg")
			.attr("class","annotations")
			.append("g")
			.style("font-size", "10px")
			.call(makeAnnotations_sachin);
			
		}
		

// Draw annotations with data points representing key highlights of Virat's career
	 function draw_annotations_virat(svg, data, xScale, yScale_cumulativeruns) {
		
		//special match # set used: [1, 14, 54, 89, 151, 189, 239]

		svg.selectAll("circle")
			.data(data)
			.enter()
			.append("circle")
			.attr("class","annotations")
			.filter(function(d) { 
				return (d.MatchNumber == 1 || 
						d.MatchNumber == 14 ||
						d.MatchNumber == 54 ||
						d.MatchNumber == 89 ||
						d.MatchNumber == 151 || 
						d.MatchNumber == 189 ||
						d.MatchNumber == 239); })
			.transition()
            .duration(300)
            .delay(function (d, i) {
             return i * 400;   	})			
			.attr("cx", function(d) { return xScale(d.MatchNumber); })
			.attr("cy", function(d) { return yScale_cumulativeruns(d.CumulativeRuns); })
			.attr("r", 5)
			.style("fill", "yellow");
			
		const annotations_virat = [
		{
			note: {	label: "A young Virat arrives in the ODI arena after winning Under 19 World Cup"},
			connector: {
				end: "dot",        
				type: "line",
				endScale: 10
			},
			y: yScale_cumulativeruns(1) + margin,
            x: margin + xScale(1),
			dy: 0-3*margin,
			dx: margin/2
        },
		{
			note: { label: "Shows his class by scoring his first century 64 matches earlier than Sachin" },
			connector: {
				end: "dot",        
				type: "line",      
				endScale: 10     
			},
			x: margin + xScale(14),
			y: yScale_cumulativeruns(14) + 0.9*margin,
			dy: 0-2 * margin,
			dx: 0.35*margin
		},{
			note: { label: "Became a fellow World Cup winner along with Sachin Tendulkar" },
			connector: {
				end: "dot",        
				type: "line",      
				endScale: 10
			},
            x: margin + xScale(54),
			y: yScale_cumulativeruns(54) + 0.55*margin,
			dy: -1* margin,
			dx: 0
		},{
			note: {	label: "Scores 5 hundreds against subcontinent teams from Feb to Jul 2012" },
			connector: {
				end: "dot",
				type: "line",
				endScale: 10
			},
            x: margin + xScale(89),
			y: yScale_cumulativeruns(89) + 0.12* margin,
			dy: -1.75*margin,
			dx: margin/2
		},{
			note: {	label: "Scores a crucial century to defeat Pakistan in World Cup as India maintains undefeated run" },
			connector: {
				end: "dot",
				type: "line",
				endScale: 10
			},			
            x: margin + xScale(151),
			y: yScale_cumulativeruns(151) - 0.42*margin,
			dy: 0.5*margin,
			dx: margin/4
		},{
			note: {	label: "A 'century' minting machine gets into action, scores 11 centuries in the next 26 matches" },
			connector: {
				end: "dot",
				type: "line",
				endScale: 10
			},			
            x: margin + xScale(189),
			y: yScale_cumulativeruns(189) - 0.85*margin,
			dy: 0-1.2*margin,
			dx: 0.25*margin
		},{
			note: {	label: "Crosses ODI batting average of 60, which very few can even dream of..." },
			connector: {
				end: "dot",
				type: "line",
				endScale: 10
			},			
            x: margin + xScale(239),
			y: yScale_cumulativeruns(239) - 1.6* margin,
			dy: margin,
			dx: 0.5*margin
		}];
		
		const makeAnnotations_virat = d3.annotation().annotations(annotations_virat);
		 d3.select("#player_stats")
			.append("svg")		 
			.attr("class","annotations")
			.append("g")
			.style("font-size", "10px")
			.call(makeAnnotations_virat);
			
		}		
		
// Draw annotations with data points representing key projections about Virat's ODI career
	function draw_annotations_projections(svg, data, xScale, yScale_cumulativeruns) {
		
		//special match # set used: [263, 377, 462]
		
		svg.selectAll("circle")
			.data(data)
			.enter()
			.append("circle")
			.attr("class","annotations")
			.filter(function(d) { 
				return (d.MatchNumber == 263 || 
						d.MatchNumber == 377 ||
						d.MatchNumber == 462); })
			.transition()
            .duration(300)
            .delay(function (d, i) {
             return i * 400;   	})			
			.attr("cx", function(d) { return xScale(d.MatchNumber); })
			.attr("cy", function(d) { return yScale_cumulativeruns(d.CumulativeRuns); })
			.attr("r", 5)
			.style("fill", "yellow");
			
		const annotations_proj = [
		{
			note: {	label: "Assume Virat scores at an average of 53.09 for the next 200 matches starting from the 263rd match"},
			connector: {
				end: "dot",        
				type: "line", 
				endScale: 10  
			},
            x: margin + xScale(263),
			y: yScale_cumulativeruns(263) - 1.25* margin,
			dy: 0.8*margin,
			dx: 0.2*margin
        },{
			note: {	label: "Virat surpasses Sachin in aggregate runs and becomes highest run getter in ODI history"},
			connector: {
				end: "dot",        
				type: "line", 
				endScale: 10  
			},
            x: margin + xScale(377),
			y: yScale_cumulativeruns(377) - 2.35*margin,
			dy: 0-margin/3,
			dx: 0-margin/2
        },{
			note: {	label: "Virat will score nearly 23,000 ODI runs by the time he plays 462 matches, nearly 4500 runs more than Sachin"},
			connector: {
				end: "dot",        
				type: "line", 
				endScale: 10  
			},
            x: margin + xScale(462),
			y: yScale_cumulativeruns(462) - 3.15*margin,
			dy: 2*margin,
			dx: 0-0.5*margin
        }];
		
		const makeAnnotations_proj = d3.annotation().annotations(annotations_proj);
		 d3.select("#player_stats")
			.append("svg")
			.attr("class","annotations")
			.append("g")
			.style("font-size", "10px")
			.call(makeAnnotations_proj);
			
		}

	 // Draw line chart showing how player accumulated runs over time
	 function draw_linechart(svg, data, xScale, yScale_cumulativeruns, linecolor) {
	 
		var valueline = d3.line().x(function(d) { return xScale(d.MatchNumber); }).y(function(d) { return yScale_cumulativeruns(d.CumulativeRuns); });
	 		
		// Create the circle that travels along the curve of chart
		var focus = svg.append('g')
					.append('circle')
					.attr("class", "svgrect")					
					.style("fill", "orange")
					.attr("stroke", "orange")
					.attr('r', 3)
					.style("opacity", 0);

		// Create the text that travels along the curve of chart
		var focusText = svg.append('g')
							.append('text')
							.attr("class", "svgrect")							
							.style("opacity", 0)
							.attr("text-anchor", "left")
							.attr("alignment-baseline", "middle");
							
		// Add the line					
		    svg.append("path")
            .data([data])
            .attr("class", "line")		
			.attr("stroke", linecolor)
            .attr("d", valueline);
			
		// Create a rect on top of the svg area: this rectangle recovers mouse position
			svg.append('rect')
				.attr("class", "svgrect")
				.style("fill", "none")
				.style("pointer-events", "all")
				.attr('width', width)
				.attr('height', height)
				.on('mouseover', mouseover_linechart)
				.on('mousemove', mousemove_linechart)
				.on('mouseout', mouseout_linechart);
				
			// What happens when the mouse move -> show the annotations at the right positions.
			function mouseover_linechart() {
				focus.style("opacity", 1)
				focusText.style("opacity",1)
			}
			
			 // This allows to find the closest X index of the mouse:
			var bisect = d3.bisector(function(d) { return d.MatchNumber; }).left;
			
			function mousemove_linechart() {
			// recover coordinate we need
				var x0Scale = xScale.invert(d3.mouse(this)[0]);
				var i = bisect(data, x0Scale, 1);
				selectedData = data[i];
						
				focus.attr("cx", xScale(selectedData.MatchNumber))
					.attr("cy", yScale_cumulativeruns(selectedData.CumulativeRuns));
					
				focusText.html("Match #" + selectedData.MatchNumber + "  " + "Cumulative Runs till this match: " + selectedData.CumulativeRuns)
					.style('fill', "purple")
					.attr('x', 10)
					.attr('y', 20);
							
			}

			function mouseout_linechart() {
				focus.style("opacity", 0);
				focusText.style("opacity", 0);
				
			}
			
		}
		

	 // Draw bars indicating runs scored by player in each match
	 function draw_barchart(svg, data, xScale, yScale_runs) {
	 
		 svg.selectAll(".bar")
            .data(data)
            .enter().append("rect")
            .attr("class", "bar")
            .on("mouseover", onMouseOver_barchart) //Add listener for the mouseover event
            .on("mouseout", onMouseOut_barchart)   //Add listener for the mouseout event
            .attr("x", function(d) { return xScale(d.MatchNumber); })
            .attr("y", function(d) { return yScale_runs(d.Runs); })
            .attr("width", function(d) {
				if (d.Runs >= 100) { return 1.75; } 
				else if (d.Runs >= 50) { return 1.25; } 
				else return 1;  })
			.transition()
            .ease(d3.easeLinear)
            .duration(300)
            .delay(function (d, i) {
             return i * 50;   	})
            .attr("height", function(d) { return height - yScale_runs(d.Runs); })  
			.attr("fill", function(d) {
				if (d.Runs >= 100) { return "blue"; } 
				else if (d.Runs >= 50) { return "orange"; } 
				else return "red";  });
				
			//Initialize bar chart legend
			var barcolorData = [
			{name: "100+ scores", color: "blue", barwidth: "1.75"},
			{name: "50-99 scores", color: "orange", barwidth: "1.25"},
			{name: "Below 50 scores", color: "red", barwidth: "1"}

			];
  
			//Create legend items
			 svg.append("g")
				.selectAll(".bar")
				.data(barcolorData)
				.enter()
				.append("rect")
				.attr("class", "barlegend")				
				.attr("width", 30)
				.attr("height", d => d.barwidth)
				.style("fill", d => d.color)
				.attr("x", 690)
				.attr("y", function(d, i) { return 371 + i * 20; });
				
			//Create legend labels
			 svg.append("g")
				.selectAll(".bar")
				.data(barcolorData)
				.enter()
				.append("text")
				.attr("class", "barlegend")					
				.attr("x", 725)
				.attr("y", function(d, i) { return 375 + i * 20; })
				.style("font-size", "14px")
				.text(function(d) {
					if (d.color == "blue") { return "100+ scores"; } 
					else if (d.color == "orange") { return "50-99 scores"; } 
					else return "Below 50 scores";  }); 
			 
				
			//mouseover event handler function
			function onMouseOver_barchart(d, i) {
    
				// Temporarily change size of specific bar on which mouseover is made for highlighting
				d3.select(this).attr("class", "highlight");
				d3.select(this)
					.transition()
					.duration(300)
					.attr('width', function(d) {
						if (d.Runs >= 100) { return 2.25; } 
						else if (d.Runs >= 50) { return 1.75; }
						else return 1.5;  })
					.attr("y", function(d) { return yScale_runs(d.Runs) - 10; })
					.attr("height", function(d) { return height - yScale_runs(d.Runs) + 10; });


				// Details shown on tooltip - 5 data attributes shown in different lines
				svg.append("g")
					.append("text")
					.attr("class", "val") // add class to text label
					.attr("x", function() {
						if (d.Runs < 140) {
							if (d.MatchNumber <= 65) { return xScale(d.MatchNumber) + 10; } 
							else if (d.MatchNumber <= 400) { return xScale(d.MatchNumber) - 100; }
							else if (d.MatchNumber <= 430) { return xScale(d.MatchNumber) - 160; }
							else return xScale(d.MatchNumber) - 180; } 
						else return xScale(d.MatchNumber) - 190; })
					.attr("y", function() { 
						if (d.Runs < 140) { return yScale_runs(d.Runs) - 60; } 
						else return yScale_runs(d.Runs) - 20; })					
					.style("font-size", "12px")
					.style("font-weight", "bold")			 
					.attr("fill", "black")
					.text("Runs: " + d.Runs);

				svg.append("g")
					.append("text")
					.attr("class", "val") // add class to text label
					.attr("x", function() { 
						if (d.Runs < 140) {
							if (d.MatchNumber <= 65) { return xScale(d.MatchNumber) + 10; } 
							else if (d.MatchNumber <= 400) { return xScale(d.MatchNumber) - 100; }
							else if (d.MatchNumber <= 430) { return xScale(d.MatchNumber) - 160; }
							else return xScale(d.MatchNumber) - 180; }
						else return xScale(d.MatchNumber) - 190; })
					.attr("y", function() { 
						if (d.Runs < 140) { return yScale_runs(d.Runs) - 48; } 
						else return yScale_runs(d.Runs) - 8; })					
					.style("font-size", "12px")
					.style("font-weight", "bold")			 
					.attr("fill", "black")
					.text("Date of match: " + d.DateofMatch);	
			
				svg.append("g")
					.append("text")
					.attr("class", "val") // add class to text label
					.attr("x", function() { 
						if (d.Runs < 140) {
							if (d.MatchNumber <= 65) { return xScale(d.MatchNumber) + 10; } 
							else if (d.MatchNumber <= 400) { return xScale(d.MatchNumber) - 100; }
							else if (d.MatchNumber <= 430) { return xScale(d.MatchNumber) - 160; }
							else return xScale(d.MatchNumber) - 180; }
						else return xScale(d.MatchNumber) - 190; })
					.attr("y", function() { 
						if (d.Runs < 140) { return yScale_runs(d.Runs) - 36; } 
						else return yScale_runs(d.Runs) + 4; })
					.style("font-size", "12px")
					.style("font-weight", "bold")			 
					.attr("fill", "black")
					.text("Match: India " + d.Opposition);

				svg.append("g")
					.append("text")
					.attr("class", "val") // add class to text label
					.attr("x", function() { 
						if (d.Runs < 140) {
							if (d.MatchNumber <= 65) { return xScale(d.MatchNumber) + 10; } 
							else if (d.MatchNumber <= 400) { return xScale(d.MatchNumber) - 100; }
							else if (d.MatchNumber <= 430) { return xScale(d.MatchNumber) - 160; }
							else return xScale(d.MatchNumber) - 180; }
						else return xScale(d.MatchNumber) - 190; })
					.attr("y", function() {
						if (d.Runs < 140) { return yScale_runs(d.Runs) - 24; } 
						else return yScale_runs(d.Runs) + 16; })					
					.style("font-size", "12px")
					.style("font-weight", "bold")			 
					.attr("fill", "black")
					.text("Match result: " + d.Result);

				svg.append("g")
					.append("text")
					.attr("class", "val") // add class to text label
					.attr("x", function() { 
						if (d.Runs < 140) {
							if (d.MatchNumber <= 65) { return xScale(d.MatchNumber) + 10; } 
							else if (d.MatchNumber <= 400) { return xScale(d.MatchNumber) - 100; }
							else if (d.MatchNumber <= 430) { return xScale(d.MatchNumber) - 160; }
							else return xScale(d.MatchNumber) - 180; }
						else return xScale(d.MatchNumber) - 190; })
					.attr("y", function() { 
						if (d.Runs < 140) { return yScale_runs(d.Runs) - 12; } 
						else return yScale_runs(d.Runs) + 28; })					
					.style("font-size", "12px")
					.style("font-weight", "bold")
					.attr("fill", "black")
					.text("Venue: " + d.Ground);
		
				// Add background to tooltip		
				svg.append("g")
					.append("rect")
					.attr("class", "val")
					.style("fill", "black")
					.attr("x", function() { 
						if (d.Runs < 140) {
							if (d.MatchNumber <= 65) { return xScale(d.MatchNumber) + 10; } 
							else if (d.MatchNumber <= 400) { return xScale(d.MatchNumber) - 100; }
							else if (d.MatchNumber <= 430) { return xScale(d.MatchNumber) - 160; }
							else return xScale(d.MatchNumber) - 180; }
						else return xScale(d.MatchNumber) - 190; })
					.attr("y", function() { 
						if (d.Runs < 140) { return yScale_runs(d.Runs) - 72; } 
						else return yScale_runs(d.Runs) - 32; })
					.style("opacity", 0.4)
					.attr("width", 180)
					.attr("height", 65);

			}


			//mouseout event handler function
			function onMouseOut_barchart(d, i) {
        
			// Remove tooltip on mouseout
				d3.select(this).attr('class', 'bar');
				d3.select(this)
					.transition()     // adds animation
					.duration(300)
					.attr("width", function(d) {
						if (d.Runs >= 100) { return 1.75; } 
						else if (d.Runs >= 50) { return 1.25; } 
						else return 1;  })
					.attr("y", function(d) { return yScale_runs(d.Runs); })
					.attr("height", function(d) { return height - yScale_runs(d.Runs); });

					d3.selectAll('.val')
					.remove();
			
			}		
				
		}

	// Draw axes for bar and line charts
	 function draw_x_axis(svg, data, xScale) {
	 
		// Draw a X axis indicating number of matches played by player
         svg.append("g")
            .attr("transform", "translate(0," + height + ")")
			.attr("class","axes")
            .call(d3.axisBottom(xScale).tickValues(tick_values_matches));
			
		// X axis label	
         svg.append("text")
		 	.attr("class","axes")
            .attr("y", height + margin - 45)
            .attr("x", width/2)
            .attr("text-anchor", "middle")
            .attr("stroke", "black")
            .text("Matches played");
			
		}
		
	 function draw_yScale_cumulativeruns_axis(svg, data, yScale_cumulativeruns) {

		// Draw the left-hand side Y axis indicating aggregate runs scored by player till that specific match
         svg.append("g")
		 	.attr("class","axes")
            .call(d3.axisLeft(yScale_cumulativeruns).tickValues(tick_values_cumulativeruns));
			
		// Left Y axis label	
		 svg.append("text")
			.attr("class","axes")
            .attr("transform", "rotate(-90)")
			.attr("x", 0 - 2.2*margin)
            .attr("y", 0 - margin/1.5) 
            .attr("text-anchor", "middle")
            .attr("stroke", "black")
            .text("Cumulative Runs");
		
		}
		
	 function draw_yScale_cumulativeruns_axis_proj(svg, data, yScale_cumulativeruns) {

		// Draw the left-hand side Y axis indicating aggregate runs scored by player till that specific match
         svg.append("g")
		 	.attr("class","axes")
            .call(d3.axisLeft(yScale_cumulativeruns).tickValues(tick_values_cumulativeruns_proj));
			
		// Left Y axis label	
		 svg.append("text")
			.attr("class","axes")
            .attr("transform", "rotate(-90)")
			.attr("x", 0 - 2.2*margin)
            .attr("y", 0 - margin/1.5) 
            .attr("text-anchor", "middle")
            .attr("stroke", "black")
            .text("Cumulative Runs");
		
		}
		
	 function draw_yScale_runs_axis(svg, data, yScale_runs) {

		// Draw the right-hand side Y axis indicating runs scored by player in each match
         svg.append("g")
			.attr("class","axes")
			//.attr("transform", "translate(" + width + ", 0)")
            .call(d3.axisLeft(yScale_runs).tickValues(tick_values_runs));
			
		//	Right Y axis label
		 svg.append("text")
		 	.attr("class","axes")
            //.attr("transform", "rotate(+90)")
			//.attr("x", 3*margin)
            //.attr("y", 0 - 11*margin) 
            //.attr("text-anchor", "end")
            //.attr("stroke", "black")
			.attr("transform", "rotate(-90)")
			.attr("x", 0 - 2.2*margin)
            .attr("y", 0 - margin/1.5) 
            .attr("text-anchor", "middle")
            .attr("stroke", "black")
            .text("Runs scored in each match");			
		}

    </script>

   </body>
</html>